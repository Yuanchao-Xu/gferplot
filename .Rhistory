load("~/GitHub/GDPmix.RData")
devtools::use_data(a, GDPmix)
a
load("~/GitHub/gferplot/data/GDPmix.rda")
load("~/GitHub/gferplot/data/GDPmix.rda")
GDPmix
GDPmix <- a
devtools::use_data(GDPmix, GDPmix)
GDPmix
devtools::check()
data(GDPmix)
GDPmix
GDPmix <- a
devtools::use_data(GDPmix, GDPmix)
data(GDPmix)
GDPmix
set.seed(123)
long <- rnorm(50, sd=100)
lat <- rnorm(50, sd=50)
d <- data.frame(long=long, lat=lat)
d <- with(d, d[abs(long) < 150 & abs(lat) < 70,])
n <- nrow(d)
d$region <- factor(1:n)
d$A <- abs(rnorm(n, sd=1))
d$B <- abs(rnorm(n, sd=2))
d$C <- abs(rnorm(n, sd=3))
d$D <- abs(rnorm(n, sd=4))
d[1, 4:7] <- d[1, 4:7] * 3
head(d)
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d,
cols=LETTERS[1:4]) + coord_equal()
library(ggplot2)
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d,
cols=LETTERS[1:4]) + coord_equal()
library(scatterpie)
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d,
cols=LETTERS[1:4]) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, size = B), data=d,
cols=LETTERS[1:4]) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, size = d$B), data=d,
cols=LETTERS[1:4]) + coord_equal()
d
d$X <- d$B
D
d
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, size = X), data=d,
cols=LETTERS[1:4]) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d, size = d$X,
cols=LETTERS[1:4]) + coord_equal()
d$X
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, r = X), data=d,
cols=LETTERS[1:4]) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, r = X), data=d,
cols=LETTERS[1:4], color = NA) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, r = X), data=d,
cols=LETTERS[1:4], color = NA) + coord_equal()
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region, r = X), data=d,
cols=LETTERS[1:4], color = NA) + coord_equal()
GDPmix
data(GDPmix)
d
data <- GDPmix
layer <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer + layer_points
data
d
LETTERS[1:4]
layer_plot <- layer_basic + layer_points + layer_pie
print(layer_plot)
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('1st', '2nd', '3rd'), color = NA) + coord_equal()
layer_plot <- layer_basic + layer_points + layer_pie
print(layer_plot)
layer_plot <- layer_basic + layer_points + layer_pie
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('1st', '2nd', '3rd'), color = NA) + coord_equal()
c('1st', '2nd', '3rd')
data
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('1st', '2nd', '3rd'), color = NA) + coord_equal()
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA) + coord_equal()
LETTERS[1:3]
c('1st', '2nd', '3rd')
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA) + coord_equal()
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('1st', '2nd', '3rd'), color = NA) + coord_equal()
debug(geom_scatterpie)
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('1st', '2nd', '3rd'), color = NA) + coord_equal()
df
?modifyList
names(GDPmix)
colnames(GDPmix)
colnames(GDPmix) <- c('Province', "GDP", "Fisrt", "Second", "Third", 'x', 'y')
data <- GDPmix
dat
data
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('First', 'Second', 'Third'), color = NA) + coord_equal()
C
data
colnames(GDPmix) <- c('Province', "GDP", "First", "Second", "Third", 'x', 'y')
undebug(geom_scatterpie)
data <- GDPmix
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('First', 'Second', 'Third'), color = NA) + coord_equal()
layer_plot <- layer_basic + layer_points + layer_pie
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('First', 'Second', 'Third'), color = NA) + coord_equal()
colnames(GDPmix) <- c('Province', "GDP", "A", "B", "C", 'x', 'y')
data <- GDPmix
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=c('First', 'Second', 'Third'), color = NA) + coord_equal()
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA) + coord_equal()
DATA
data
d
data
data <- data[,2:7]
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA) + coord_equal()
data
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA) + coord_equal()
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=LETTERS[1:3], color = NA)
GDPmix
data(GDPmix)
GDPmix
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer)
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_plot <- layer_basic + layer_points
layer_plot
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data=data, aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic + layer_points + layer_pie
layer_basic + layer_points
layer_pie
print(layer_pie)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic <- ggplot(data)
layer_points <- geom_point(aes(x, y))
layer_pie <- geom_scatterpie(aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic <- ggplot(data)
layer_points <- geom_point(aes(x, y))
layer_pie <- geom_scatterpie(aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_pie <- geom_scatterpie(aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = GDP),
cols=colnames(data)[3:5], color = NA)
layer_points <- geom_point(aes(x, y))
layer_basic <- ggplot(data)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
colnames(data)[3:5]
colnames(data)
GDPmix
data <- GDPmix
layer_basic <- ggplot(data)
layer_points <- geom_point(aes(x, y))
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = GDP),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = GDP ,group = Province),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic + layer_points
layer_basic + layer_points
layer_basic + layer_points + layer_pie
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
data
data$region <- 1:11
data
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = GDP ,group = region),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic <- ggplot(data)
layer_points <- geom_point(aes(x, y))
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = GDP ,group = region),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
data
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = region ,group = region),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
radiu <- getRadius(data$GDP)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = radius),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_pie <- geom_scatterpie(data = data, aes(x, y) r = radius),
cols = colnames(data)[3:5], color = NA)
layer_pie <- geom_scatterpie(data = data, aes(x, y), r = radius,
cols = colnames(data)[3:5], color = NA)
radiu <- getRadius(data$GDP)
radius <- getRadius(data$GDP)
getRadius <- function(y, small = 1.5, medium = 3, large = 5) {
r <- sapply(y, function(x) {
if (x <= 40000 & x >= 15000) {
x <- medium
} else if (x < 15000) {
x <- small
} else {
x <- large
}
})
return (r)
}
radius <- getRadius(data$GDP)
radius
layer_pie <- geom_scatterpie(data = data, aes(x, y), r = radius,
cols = colnames(data)[3:5], color = NA)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = radius),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
radius
data
data$radius <- getRadius(data$GDP)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = radius),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y))
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = radius),
cols = colnames(data)[3:5], color = NA)
layer_plot <- layer_basic + layer_points + layer_pie + coord_equal()
print(layer_plot)
layer_basic+ layer_pie + coord_equal()
layer_basic+ layer_pie + coord_equal()
layer_basic+ layer_pie + coord_equal()
style <- theme(axis.line = element_line(size = 1, colour = "black"))
print(layer_plot + style)
a <- theme(axis.line = element_line(size = 1, colour = "black"),
panel.background = element_rect(fill = "white", colour = "grey50"))
ggstyle <- function() {
a <- theme(axis.line = element_line(size = 1, colour = "black"),
panel.background = element_rect(fill = "white", colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
a <- theme(axis.line = element_line(size = 1, colour = "black"),
panel.background = element_rect(fill = "white"))
ggstyle <- function() {
a <- theme(axis.line = element_line(size = 1, colour = "black"),
panel.background = element_rect(fill = "white"))
}
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- theme(axis.line = element_line(size = 1, colour = "black"),
panel.background = element_rect(fill = "white"),
panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- theme(axis.line = element_line(size = 1, colour = "black"))
#panel.background = element_rect(fill = "white"),
#panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
print(layer_plot)
style <- theme_classic()
print(layer_plot + style)
print(layer_plot + style)
print(layer_plot + style)
install.packages("ggrepel")
library(ggrepel)
print(layer_plot + style)
layer_plot <- layer_basic + layer_pie + layer_label + coord_equal()
print(layer_plot + style)
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province))
print(layer_plot + style)
layer_basic + layer_points
layer_basic + layer_points + layer_label
layer_plot <- layer_basic + layer_pie + layer_label + coord_equal()
layer_basic + layer_pie + layer_label + coord_equal()
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(0.35, "lines"))
layer_plot <- layer_basic + layer_pie + layer_label + coord_equal()
print(layer_plot + style)
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
segment.size = 0.5)
layer_plot <- layer_basic + layer_pie + layer_label + coord_equal()
print(layer_plot + style)
layer_points <- geom_point(data = data, aes(x, y, r = radius))
layer_points <- geom_point(data = data, aes(x, y, size = radius))
layer_basic <- ggplot()
layer_basic + layer_points
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
segment.size = 0.5)
layer_basic + layer_points + layer_label
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(0.5, "lines"),
segment.size = 0.5)
layer_basic + layer_points + layer_label
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(0.5, "lines"),
)
layer_basic + layer_points + layer_label
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(1, "lines"),
)
layer_basic + layer_points + layer_label
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(radius, "lines")
)
layer_basic + layer_points + layer_label
?unit
unit(1, "lines")
unit(2, "lines")
unit([1:3], "lines")
unit(1:3, "lines")
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(3, "lines")
)
layer_basic + layer_points + layer_label
labelLine <- 1
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_basic + layer_points + layer_label
layer_basic <- ggplot()
layer_points <- geom_point(data = data, aes(x, y, size = radius))
data$radius <- getRadius(data$GDP)
layer_pie <- geom_scatterpie(data = data, aes(x, y, r = radius),
cols = colnames(data)[3:5], color = NA)
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
style <- ggstyle()
print(layer_plot + style)
labelLine <- 2
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
print(layer_plot + style)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
style <- ggstyle()
print(layer_plot + style)
labelLine
1.5
data
labelLine <- 5/3
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
print(layer_plot + style)
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
style <- ggstyle()
print(layer_plot + style)
labelLine <- 1.2
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
style <- ggstyle()
print(layer_plot + style)
labelLine <- max(data$radius)/3
layer_label <- geom_text_repel(data = data, aes(x, y, label = Province),
point.padding = unit(labelLine, "lines")
)
layer_plot <- layer_basic + layer_points + layer_pie + layer_label + coord_equal()
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- themetheme(axis.line = element_line(size = 1, colour = "black"))
#panel.background = element_rect(fill = "white"),
#panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- theme_classic()
#themetheme(axis.line = element_line(size = 1, colour = "black"))
#panel.background = element_rect(fill = "white"),
#panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- theme_classic() +
themetheme(axis.line = element_line(size = 1, colour = "black"))
#panel.background = element_rect(fill = "white"),
#panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
ggstyle <- function() {
a <- theme_classic() +
theme(axis.line = element_line(size = 1, colour = "black"))
#panel.background = element_rect(fill = "white"),
#panel.grid.major = element_line(colour = "grey50"))
}
style <- ggstyle()
print(layer_plot + style)
layer_plot <- layer_basic + layer_pie + layer_label + layer_legend + coord_equal()
print(layer_plot + style)
layer_legend <- geom_scatterpie_legend(d$radius, x=-160, y=-55)
layer_legend <- geom_scatterpie_legend(data$radius, x=-160, y=-55)
layer_plot <- layer_basic + layer_pie + layer_label + layer_legend + coord_equal()
print(layer_plot + style)
layer_legend <- geom_scatterpie_legend(data$radius, x= 0, y=0)
layer_plot <- layer_basic + layer_pie + layer_label + layer_legend + coord_equal()
print(layer_plot + style)
print(layer_plot + style)
layer_lines <-
#layer_legend <- geom_scatterpie_legend(data$radius, x= 0, y=0)
layer_plot <- layer_basic + layer_pie + layer_label + coord_equal()
print(layer_plot + style)
devtools::document()
devtools::document()
devtools::check(cran = T)
